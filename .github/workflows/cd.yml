name: CD Pipeline
on:
  workflow_run:
    workflows: ["CI Pipeline"]
    types:
      - completed
    branches: [main]

jobs:
  build:
    runs-on: self-hosted
    if: ${{ github.event.workflow_run.conclusion == 'success'}}
    steps:
      - name: Debug - Find .env file
        run: |
          echo "Current user: $(whoami)"
          echo "Home directory: $HOME"
          echo "Current working directory: $(pwd)"
          echo "Looking for .env files:"
          find $HOME -name ".env" 2>/dev/null || echo "No .env found in home directory"
          find /home -name ".env" 2>/dev/null || echo "No .env found in /home"
          ls -la $HOME/.env 2>/dev/null || echo "No .env in $HOME"
          ls -la ~/.env 2>/dev/null || echo "No .env in ~"
